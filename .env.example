# Root environment for local Docker Compose development

# App URLs
APP_NAME=AIRAGChat
FRONTEND_PORT=5173
BACKEND_PORT=8000
BACKEND_PUBLIC_URL=http://localhost:8000
FRONTEND_PUBLIC_URL=http://localhost:5173

# Backend runtime
APP_ENV=development
APP_DEBUG=true
APP_LOG_LEVEL=INFO
APP_JWT_SECRET=change-me-local-jwt-secret
APP_ACCESS_TOKEN_EXPIRE_MINUTES=15
APP_REFRESH_TOKEN_EXPIRE_DAYS=7
APP_RATE_LIMIT_LOGIN_PER_MIN=5
APP_RATE_LIMIT_CHAT_PER_MIN=30
APP_CORS_ORIGINS=http://localhost:5173
APP_COOKIE_SECURE=false

# Secrets encryption (generate with python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())")
APP_SECRETS_MASTER_KEY=qzlV6Lx6UBGKIFYOa0fIYIAFHOEk7L1YhsF4RUpI8rU=

# Admin bootstrap
APP_BOOTSTRAP_ADMIN_USERNAME=admin
APP_BOOTSTRAP_ADMIN_EMAIL=admin@example.local
APP_BOOTSTRAP_ADMIN_PASSWORD=ChangeMe123!
APP_BOOTSTRAP_ADMIN_DISPLAY_NAME=Administrator

# PostgreSQL
POSTGRES_DB=airagchat
POSTGRES_USER=airagchat
POSTGRES_PASSWORD=airagchat
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# Redis
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0

# Qdrant
QDRANT_HOST=qdrant
QDRANT_PORT=6333
QDRANT_COLLECTION=documents_chunks

# Uploads
UPLOADS_DIR=/app/data/uploads
MAX_UPLOAD_SIZE_MB=100
MAX_PDF_PAGES=1000
PDF_OCR_ENABLED=false

# Celery
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/1

# Embeddings / RAG defaults
EMBEDDING_MODEL_ID=text-embedding-3-small
EMBEDDING_BATCH_SIZE=16
OPENAI_CHAT_MODEL=gpt-4o-mini
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
RAG_CHUNK_SIZE=900
RAG_CHUNK_OVERLAP=150
RAG_TOP_K=5
RAG_MIN_SCORE=0.15
RAG_ANSWER_BEHAVIOR_MODE=strict_rag_only

# OpenAI provider
PROVIDER_ACTIVE=openai_api
OPENAI_ENABLED=true
OPENAI_BASE_URL=https://api.openai.com/v1

# Telemetry
OTEL_ENABLED=true
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4317
OTEL_SERVICE_NAME_BACKEND=airagchat-backend
OTEL_SERVICE_NAME_WORKER=airagchat-worker
OTEL_SERVICE_NAME_FRONTEND=airagchat-frontend
OTEL_TRACES_SAMPLER=parentbased_traceidratio
OTEL_TRACES_SAMPLER_ARG=1.0
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin

# Frontend env (Vite runtime build-time defaults)
VITE_API_BASE_URL=http://localhost:8000/api/v1
VITE_OTEL_ENABLED=true
VITE_OTEL_OTLP_HTTP_URL=http://localhost:4318/v1/traces
